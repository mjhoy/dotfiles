* nix stuff

I use [[http://nixos.org/nix/][nix]] on my mac to manage packages via a flake.

- Package overrides live in [[./overlays][overlays]].
- The list of packages to install in the profile is in [[./packages.nix][packages.nix]].
- The NixOS setup in [[./nixos][nixos]] is outdated.

** mac workflow

*** installing the environment:

#+begin_src sh
nix profile install .#devEnv
#+end_src

*** rebuilding

#+begin_src sh
nix profile upgrade '.*'
#+end_src

*** upgrading

Update nixpkgs to the latest commit on the pinned branch:

#+begin_src sh
nix flake update
nix profile upgrade '.*'
#+end_src

*** collecting garbage

nix artifacts hang around long after you've finished using them, and
will use a bit of space. to clean:

#+begin_src sh
nix profile wipe-history
nix-collect-garbage
#+end_src

or to remove everything not in a profile,

#+begin_src sh
nix-collect-garbage -d
#+end_src

*** installing ad-hoc package

#+begin_src sh
nix profile install nixpkgs#python3
#+end_src

*** seeing what's installed

#+begin_src sh
nix profile list
#+end_src

*** querying packages

#+begin_src sh
nix search nixpkgs postgresql
#+end_src
