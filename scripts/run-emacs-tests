#!/usr/bin/env bash
# Run all Emacs ERT tests

set -euo pipefail

cd "$(dirname "$0")/.."

test_files=(
    emacs.d/test/org-query/org-query-test.el
)

exit_code=0

for test_file in "${test_files[@]}"; do
    echo "Running tests: $test_file"
    if ! emacs -batch -l ert -l "$test_file" -f ert-run-tests-batch-and-exit; then
        exit_code=1
    fi
done

exit $exit_code
